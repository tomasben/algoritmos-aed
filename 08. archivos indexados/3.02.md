## 3.02
Una empresa dispone de un fichero secuencial con datos de sus empleados, ordenado
por número de sucursal, y categoría, con los siguientes datos:

| NRO_SUCURSAL | CATEGORÍA (A-B-C) | NOMBRE_EMPLEADO | COD_CURSO | TÉCNICO (SI-NO) |
|--------------|-------------------|-----------------|-----------|-----------------|

y un fichero con datos de cursos, indexado por código de curso:

| COD_CURSO | NOMBRE | FECHA | CANT_HORAS |
|-----------|--------|-------|------------|

Emitir un listado informando:
1. para cada empleado: sucursal, categoría, nombre del empleado y nombre del curso
que debe realizar.
2. por sucursal, categoría y toda la empresa:
  a. total empleados técnicos
  b. total empleados no técnicos
  c. total empleados

```
ACCION ejercicio ES
  AMBIENTE
    Empleado = REGISTRO
      nro_suc: N(5)
      categ: ('A', 'B', 'C')
      nombre: AN(30)
      cod_curso: N(4)
      es_tecnico: logico
    FIN_REGISTRO

    Curso = REGISTRO
      cod_curso: N(4)
      nombre: AN(30)
      fecha: N(8)
      horas: real
    FIN_REGISTRO

    empleados: archivo de Empleado ordenado por nro_suc, categ
    emp: Empleado
    cursos: archivo de Curso indexado por cod_curso
    cur: Curso

    tecnicos_cat, no_tecnicos_cat, total_cat: entero
    tecnicos_suc, no_tecnicos_suc, total_suc: entero
    tecnicos_gral, no_tecnicos_gral, total_gral: entero
    resg_categ, resg_suc: entero

    PROCEDIMIENTO corte_categoria() ES
      ESCRIBIR("Para la categoría ", resg_cat, " los totales son: ")
      ESCRIBIR("Téncnicos: ", tecnicos_cat)
      ESCRIBIR("No técnicos: ", no_tecnicos_cat)
      ESCRIBIR("Cantidad total de empleados: ", total_cat)
      tecnicos_suc := tecnicos_suc + tecnicos_cat
      no_tecnicos_suc := no_tecnicos_suc + no_tecnicos_cat
      total_suc := total_suc + total_cat
      tecnicos_cat := 0
      no_tecnicos_cat := 0
      total_cat := 0
      resg_cat := emp.categ
    FIN_PROCEDIMIENTO

    PROCEDIMIENTO corte_sucursal() ES
      ESCRIBIR("Para la sucursal ", resg_suc, " los totales son: ")
      ESCRIBIR("Téncnicos: ", tecnicos_suc)
      ESCRIBIR("No técnicos: ", no_tecnicos_suc)
      ESCRIBIR("Cantidad total de empleados: ", total_suc)
      tecnicos_gral := tecnicos_gral + tecnicos_suc
      no_tecnicos_gral := no_tecnicos_gral + no_tecnicos_suc
      total_gral := total_gral + total_suc
      tecnicos_suc := 0
      no_tecnicos_suc := 0
      total_suc := 0
      resg_suc := emp.nro_suc
    FIN_PROCEDIMIENTO
  PROCESO
    ABRIR E/ (empleados); LEER(empleados, emp)
    ABRIR E/ (cursos)

    resg_cat := emp.cat; resg_suc := emp.nro_suc

    tecnicos_cat := 0; no_tecnicos_cat := 0; total_cat := 0
    tecnicos_suc := 0; no_tecnicos_suc := 0; total_suc := 0
    tecnicos_gral := 0; no_tecnicos_gral := 0; total_gral := 0

    ESCRIBIR("| NRO_SUCURSAL | CATEGORÍA (A-B-C) | NOMBRE_EMPLEADO | NOMBRE_CURSO |")
    MIENTRAS NO FDA(empleados) HACER
      SI emp.nro_suc <> resg_suc ENTONCES
        corte_sucursal()
      CONTRARIO
        SI emp.cat <> resg_cat ENTONCES
          corte_categoria()
        FIN_SI
      FIN_SI

      total_cat := total_cat + 1

      SI emp.es_tecnico ENTONCES
        tecnicos_cat := tecnicos_cat + 1
      CONTRARIO
        no_tecnicos_cat := no_tecnicos_cat + 1
      FIN_SI

      cur.cod_curso := emp.cod_curso
      LEER(cursos, cur)

      SI EXISTE ENTONCES
        ESCRIBIR(emp.nro_suc, emp.categ, emp.nombre, cur.nombre)
      CONTRARIO
        ESCRIBIR("ERROR: ningun registro encontrado para el código de curso: ", emp.cod_curso)
      FIN_SI

      LEER(empleados, emp)
    FIN_MIENTRAS
    corte_sucursal()

    ESCRIBIR("Los totales generales de empleados de la empresa son: ")
    ESCRIBIR("Téncnicos: ", tecnicos_gral)
    ESCRIBIR("No técnicos: ", no_tecnicos_gral)
    ESCRIBIR("Cantidad total de empleados: ", total_gral)

    CERRAR(empleados)
    CERRAR(cursos)
FIN_ACCION
```
